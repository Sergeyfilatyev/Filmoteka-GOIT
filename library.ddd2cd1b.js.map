{"mappings":"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","sources":["src/library.js","src/js/library-buttons.js","src/js/watchedRender.js","src/js/markupFromStorage.js","src/js/library-modal.js"],"sourcesContent":["import './js/fetch';\nimport './js/library-buttons';\nimport './js/markupFromStorage';\nimport './js/watchedRender';\nimport './js/library-modal';\nimport './js/modal-footer';\n","import { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\n// const headerWatchedButton = document.querySelector('.header__watched_button');\n// const headerQueueButton = document.querySelector('.header__queue_button');\n\nrefs.headerWatchedButton.addEventListener('click', () => {\n  if (refs.headerWatchedButton.classList.contains('active-header-button')) {\n    return;\n  }\n\n  refs.headerWatchedButton.classList.add('active-header-button');\n  refs.headerQueueButton.classList.remove('active-header-button');\n  if (\n    localStorage.getItem('watched') &&\n    localStorage.getItem('watched') !== '[]'\n  ) {\n    renderWatchedFilms();\n  } else {\n    refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/empty.e9257588.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n  }\n});\n\nrefs.headerQueueButton.addEventListener('click', () => {\n  if (refs.headerQueueButton.classList.contains('active-header-button')) {\n    return;\n  }\n\n  refs.headerQueueButton.classList.add('active-header-button');\n  refs.headerWatchedButton.classList.remove('active-header-button');\n  if (localStorage.getItem('queue') && localStorage.getItem('queue') !== '[]') {\n    renderQueueFilms();\n  } else {\n    refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/empty.e9257588.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n  }\n});\n","import { refs } from './refs';\n\nexport { renderWatchedFilms, renderQueueFilms };\nfunction renderWatchedFilms() {\n  refs.watchedFilmsList.innerHTML = '';\n  const watchedFilms = JSON.parse(localStorage.getItem('watched'));\n\n  watchedFilms.forEach(movie => {\n    if (movie.genres.length >= 3) {\n      refs.watchedFilmsList.insertAdjacentHTML(\n        'beforeend',\n        `<div class=\"watched-film__card\" >\n          <img data-id=\"${movie.id}\"\n            class=\"popular-film__cover\"\n            src=\"${movie.cover}\"\n            alt=\"${movie.name}\"\n            loading=\"lazy\"\n          />\n          <div class=\"info\">\n            <p class=\"info__name\">${\n              movie.name.length >= 40\n                ? movie.name.substring(0, 40) + '...'\n                : movie.name\n            }</p>\n            <p class=\"info__other\">${movie.genres[0]}, ${\n          movie.genres[1]\n        }, Other | ${movie.year}</p>\n          </div>\n        </div>`\n      );\n      return;\n    }\n    refs.watchedFilmsList.insertAdjacentHTML(\n      'beforeend',\n      `<div class=\"watched-film__card\" >\n      <img data-id=\"${movie.id}\"\n        class=\"popular-film__cover\"\n        src=\"${movie.cover}\"\n        alt=\"${movie.name}\"\n        loading=\"lazy\"\n      />\n      <div class=\"info\">\n        <p class=\"info__name\">${\n          movie.name.length >= 40\n            ? movie.name.substring(0, 40) + '...'\n            : movie.name\n        }</p>\n        <p class=\"info__other\">${movie.genres.join(', ')} | ${movie.year}</p>\n      </div\n    </div>`\n    );\n  });\n}\n\nfunction renderQueueFilms() {\n  refs.watchedFilmsList.innerHTML = '';\n  const queueFilms = JSON.parse(localStorage.getItem('queue'));\n\n  queueFilms.forEach(movie => {\n    if (movie.genres.length >= 3) {\n      refs.watchedFilmsList.insertAdjacentHTML(\n        'beforeend',\n        `<div class=\"watched-film__card\"  >\n          <img data-id=\"${movie.id}\"\n            class=\"popular-film__cover\"\n            src=\"${movie.cover}\"\n            alt=\"${movie.name}\"\n            loading=\"lazy\"\n          />\n          <div class=\"info\">\n            <p class=\"info__name\">${\n              movie.name.length >= 40\n                ? movie.name.substring(0, 40) + '...'\n                : movie.name\n            }</p>\n            <p class=\"info__other\">${movie.genres[0]}, ${\n          movie.genres[1]\n        }, Other | ${movie.year}</p>\n          </div>\n        </div>`\n      );\n      return;\n    }\n    refs.watchedFilmsList.insertAdjacentHTML(\n      'beforeend',\n      `<div class=\"watched-film__card\" >\n      <img data-id=\"${movie.id}\"\n        class=\"popular-film__cover\"\n        src=\"${movie.cover}\"\n        alt=\"${movie.name}\"\n        loading=\"lazy\"\n      />\n      <div class=\"info\">\n        <p class=\"info__name\">${\n          movie.name.length >= 40\n            ? movie.name.substring(0, 40) + '...'\n            : movie.name\n        }</p>\n        <p class=\"info__other\">${movie.genres.join(', ')} | ${movie.year}</p>\n      </div\n    </div>`\n    );\n  });\n}\n","import { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\n\nif (\n  localStorage.getItem('watched') &&\n  localStorage.getItem('watched') !== '[]'\n) {\n  renderWatchedFilms();\n}\ndocument.querySelector('.spinner').style.display = 'none';\n","import { fetchById } from './fetch';\nimport { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\nimport {\n  addToStorage,\n  getFromStorage,\n  removeFromStorage,\n} from './localStorage';\n\nlet movieForStorage = {};\nlet filmsInWatched = [];\nlet filmsInQueue = [];\n\nrefs.watchedFilmsList.addEventListener('click', onMovieImageClick);\nrefs.modalCloseBtn.addEventListener('click', onCloseBtnClick);\n\nasync function onMovieImageClick(event) {\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  const movie = await fetchById(event.target.dataset.id);\n\n  refs.modalContainer.innerHTML = '';\n  refs.modalContainer.insertAdjacentHTML(\n    'beforeend',\n    `<div id=\"${movie.id}\" class=\"movie-card\">\n        <img src=\"${movie.cover}\" alt=\"${\n      movie.name\n    }\" loading=\"lazy\" class='movie-cover'>\n    \n        <div class=\"movie-info\">\n            <h2 class='movie-title'>${movie.name}</h2>\n            <p class='text'>Vote/Votes <span class='back-info movie-votes'><span class='movie-rating'>${\n              movie.rating\n            }</span>/ ${movie.votes}</span></p>\n             <p class='text'>Popularity <span class='back-info movie-popular'>${\n               movie.popularity\n             }</span></p>\n             <p class='text'>Original Title <span class='back-info back-info-text org-title'>${\n               movie.originalTitle\n             }</span></p>\n            <p class='text'>Genre <span class='back-info back-info-text movie-genre'>${movie.genres.join(\n              ', '\n            )}</span></p>\n            <p class='about-title'>About</p>\n            <p class='movie-description'>${movie.about}</p>\n         </div>\n         </div>\n         <div class='modal-btns-wrapper'>\n         <button type=\"button\" class=\"modal-btn current-btn watched\">ADD TO WATCHED</button>\n    <button type=\"button\" class=\"modal-btn queue\">ADD TO QUEUE</button>\n    </div>`\n  );\n\n  openModal();\n  movieForStorage = movie;\n\n  if (\n    document\n      .querySelector('.header__watched_button')\n      .classList.contains('active-header-button')\n  ) {\n    const watchedDelete = document.querySelector('.watched');\n    watchedDelete.textContent = 'DELETE';\n    watchedDelete.addEventListener('click', () => {\n      deleteWatchedFilm(movie);\n    });\n    const addToQueue = document.querySelector('.queue');\n    addToQueue.addEventListener('click', onQueuedBtnClick);\n  } else {\n    const queueDelete = document.querySelector('.queue');\n    queueDelete.textContent = 'DELETE';\n    queueDelete.addEventListener('click', () => {\n      deleteQueueFilm(movie);\n    });\n    const addToWatched = document.querySelector('.watched');\n    addToWatched.addEventListener('click', onWatchedBtnClick);\n  }\n}\n\nfunction openModal() {\n  refs.backdrop.classList.remove('is-hidden');\n\n  window.addEventListener('keydown', onEscKeyPress);\n}\n\nfunction closeModal() {\n  refs.backdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onEscKeyPress);\n}\nfunction onCloseBtnClick() {\n  closeModal();\n}\n\ndocument.querySelector('.backdrop').addEventListener('click', event => {\n  if (event.target.classList.contains('backdrop')) {\n    closeModal();\n  }\n});\n\n// function deleteQueueFilm(data) {\n//   queueFilms.forEach((film, index) => {\n//     if (film.id === data.id) {\n//       if (headerQueueButton.classList.contains('active-header-button')) {\n//         if (queueFilms.length === size + 1) {\n//           page -= 1;\n//         }\n//         queueFilms.splice(index, 1);\n//         localStorage.setItem('queue', JSON.stringify(queueFilms));\n//         if (\n//           localStorage.getItem('queue') &&\n//           localStorage.getItem('queue') !== '[]'\n//         ) {\n//           renderQueueFilms(page);\n//         } else {\n//           paginationList.innerHTML = `\n//                   <div class=\"empty-page\">\n//                   <img src=\"./img/empty.jpg\" alt=\"no films img\" />\n//                   <span class=\"empty-page_text\">There are no films here yet</span>\n//                   </div>\n//                   `;\n//           queueList.innerHTML = '';\n//         }\n\n//         toggleModal();\n//         window.removeEventListener('keydown', onEscClose);\n//       }\n//     }\n//   });\n// }\n\nfunction deleteWatchedFilm(data) {\n  const films = JSON.parse(localStorage.getItem('watched'));\n\n  films.forEach((film, index) => {\n    if (film.id === data.id) {\n      films.splice(index, 1);\n      localStorage.setItem('watched', JSON.stringify(films));\n      if (\n        localStorage.getItem('watched') &&\n        localStorage.getItem('watched') !== '[]'\n      ) {\n        renderWatchedFilms();\n      } else {\n        refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/empty.e9257588.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n      }\n\n      closeModal();\n    }\n  });\n}\n\nfunction deleteQueueFilm(data) {\n  const films = JSON.parse(localStorage.getItem('queue'));\n\n  films.forEach((film, index) => {\n    if (film.id === data.id) {\n      films.splice(index, 1);\n      localStorage.setItem('queue', JSON.stringify(films));\n      if (\n        localStorage.getItem('queue') &&\n        localStorage.getItem('queue') !== '[]'\n      ) {\n        renderQueueFilms();\n      } else {\n        refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/empty.e9257588.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n      }\n\n      closeModal();\n    }\n  });\n}\n\n//?   то что добавил к Леры файлу moda-movie ========================================================================\n\nfunction checkLibraryStorage() {\n  if (getFromStorage('watched')) {\n    filmsInWatched = getFromStorage('watched');\n  }\n\n  if (getFromStorage('queue')) {\n    filmsInQueue = getFromStorage('queue');\n  }\n}\n\nfunction onWatchedBtnClick(e) {\n  if (!movieForStorage.id) {\n    return alert('Movie not find');\n  }\n  checkLibraryStorage();\n\n  if (filmsInWatched.find(film => film.id === movieForStorage.id)) {\n    return;\n  }\n  filmsInWatched.push(movieForStorage);\n\n  addToStorage('watched', filmsInWatched);\n}\n\nfunction onQueuedBtnClick(e) {\n  if (!movieForStorage.id) {\n    return alert('Movie not find');\n  }\n  checkLibraryStorage();\n  if (filmsInQueue.find(film => film.id === movieForStorage.id)) {\n    return;\n  }\n  filmsInQueue.push(movieForStorage);\n\n  addToStorage('queue', filmsInQueue);\n}\n\nfunction onEscKeyPress(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n"],"names":["parcelRequire","$krGWQ","$36522d8004281571$export$5dfc23e2ecf7e5c1","refs","watchedFilmsList","innerHTML","JSON","parse","localStorage","getItem","forEach","movie","genres","length","insertAdjacentHTML","id","cover","name","substring","year","join","$36522d8004281571$export$a4665dd827595a4f","headerWatchedButton","addEventListener","classList","contains","add","headerQueueButton","remove","document","querySelector","style","display","$cyIMT","$da48e4bca1361a11$var$movieForStorage","$da48e4bca1361a11$var$filmsInWatched","$da48e4bca1361a11$var$filmsInQueue","$da48e4bca1361a11$var$closeModal","backdrop","window","removeEventListener","$da48e4bca1361a11$var$onEscKeyPress","$da48e4bca1361a11$var$checkLibraryStorage","$31u3U","getFromStorage","$da48e4bca1361a11$var$onWatchedBtnClick","e","alert","find","film","push","addToStorage","$da48e4bca1361a11$var$onQueuedBtnClick","event","key","async","target","nodeName","fetchById","dataset","modalContainer","rating","votes","popularity","originalTitle","about","$da48e4bca1361a11$var$openModal","watchedDelete","textContent","data","films","index","splice","setItem","stringify","$da48e4bca1361a11$var$deleteWatchedFilm","queueDelete","$da48e4bca1361a11$var$deleteQueueFilm","modalCloseBtn"],"version":3,"file":"library.ddd2cd1b.js.map"}