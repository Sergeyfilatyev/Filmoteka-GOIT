!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire634e;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,a.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire634e=a),a("5g02X");var s=a("4Nugj");function i(){s.refs.watchedFilmsList.innerHTML="";JSON.parse(localStorage.getItem("watched")).forEach((e=>{e.genres.length>=3?s.refs.watchedFilmsList.insertAdjacentHTML("beforeend",`<div class="watched-film__card" >\n          <img data-id="${e.id}"\n            class="popular-film__cover"\n            src="${e.cover}"\n            alt="${e.name}"\n            loading="lazy"\n          />\n          <div class="info">\n            <p class="info__name">${e.name.length>=40?e.name.substring(0,40)+"...":e.name}</p>\n            <p class="info__other">${e.genres[0]}, ${e.genres[1]}, Other | ${e.year}</p>\n          </div>\n        </div>`):s.refs.watchedFilmsList.insertAdjacentHTML("beforeend",`<div class="watched-film__card" >\n      <img data-id="${e.id}"\n        class="popular-film__cover"\n        src="${e.cover}"\n        alt="${e.name}"\n        loading="lazy"\n      />\n      <div class="info">\n        <p class="info__name">${e.name.length>=40?e.name.substring(0,40)+"...":e.name}</p>\n        <p class="info__other">${e.genres.join(", ")} | ${e.year}</p>\n      </div\n    </div>`)}))}function r(){s.refs.watchedFilmsList.innerHTML="";JSON.parse(localStorage.getItem("queue")).forEach((e=>{e.genres.length>=3?s.refs.watchedFilmsList.insertAdjacentHTML("beforeend",`<div class="watched-film__card"  >\n          <img data-id="${e.id}"\n            class="popular-film__cover"\n            src="${e.cover}"\n            alt="${e.name}"\n            loading="lazy"\n          />\n          <div class="info">\n            <p class="info__name">${e.name.length>=40?e.name.substring(0,40)+"...":e.name}</p>\n            <p class="info__other">${e.genres[0]}, ${e.genres[1]}, Other | ${e.year}</p>\n          </div>\n        </div>`):s.refs.watchedFilmsList.insertAdjacentHTML("beforeend",`<div class="watched-film__card" >\n      <img data-id="${e.id}"\n        class="popular-film__cover"\n        src="${e.cover}"\n        alt="${e.name}"\n        loading="lazy"\n      />\n      <div class="info">\n        <p class="info__name">${e.name.length>=40?e.name.substring(0,40)+"...":e.name}</p>\n        <p class="info__other">${e.genres.join(", ")} | ${e.year}</p>\n      </div\n    </div>`)}))}(s=a("4Nugj")).refs.headerWatchedButton.addEventListener("click",(()=>{s.refs.headerWatchedButton.classList.contains("active-header-button")||(s.refs.headerWatchedButton.classList.add("active-header-button"),s.refs.headerQueueButton.classList.remove("active-header-button"),localStorage.getItem("watched")&&"[]"!==localStorage.getItem("watched")?i():s.refs.watchedFilmsList.innerHTML='\n    <div class="empty-page">\n    <img src="/empty.e9257588.jpg" alt="no films img" />\n    <span class="empty-page_text">There are no films here yet</span>\n  </div>\n    ')})),s.refs.headerQueueButton.addEventListener("click",(()=>{s.refs.headerQueueButton.classList.contains("active-header-button")||(s.refs.headerQueueButton.classList.add("active-header-button"),s.refs.headerWatchedButton.classList.remove("active-header-button"),localStorage.getItem("queue")&&"[]"!==localStorage.getItem("queue")?r():s.refs.watchedFilmsList.innerHTML='\n    <div class="empty-page">\n    <img src="/empty.e9257588.jpg" alt="no films img" />\n    <span class="empty-page_text">There are no films here yet</span>\n  </div>\n    ')})),a("4Nugj"),localStorage.getItem("watched")&&"[]"!==localStorage.getItem("watched")&&i(),document.querySelector(".spinner").style.display="none";var o=a("5g02X"),c=(s=a("4Nugj"),a("UL92Z"));let d={},l=[],m=[];function u(){s.refs.backdrop.classList.add("is-hidden"),window.removeEventListener("keydown",h)}function p(){(0,c.getFromStorage)("watched")&&(l=(0,c.getFromStorage)("watched")),(0,c.getFromStorage)("queue")&&(m=(0,c.getFromStorage)("queue"))}function g(e){if(!d.id)return alert("Movie not find");p(),l.find((e=>e.id===d.id))||(l.push(d),(0,c.addToStorage)("watched",l))}function f(e){if(!d.id)return alert("Movie not find");p(),m.find((e=>e.id===d.id))||(m.push(d),(0,c.addToStorage)("queue",m))}function h(e){"Escape"===e.key&&u()}s.refs.watchedFilmsList.addEventListener("click",(async function(e){if("IMG"!==e.target.nodeName)return;const t=await(0,o.fetchById)(e.target.dataset.id);if(s.refs.modalContainer.innerHTML="",s.refs.modalContainer.insertAdjacentHTML("beforeend",`<div id="${t.id}" class="movie-card">\n        <img src="${t.cover}" alt="${t.name}" loading="lazy" class='movie-cover'>\n    \n        <div class="movie-info">\n            <h2 class='movie-title'>${t.name}</h2>\n            <p class='text'>Vote/Votes <span class='back-info movie-votes'><span class='movie-rating'>${t.rating}</span>/ ${t.votes}</span></p>\n             <p class='text'>Popularity <span class='back-info movie-popular'>${t.popularity}</span></p>\n             <p class='text'>Original Title <span class='back-info back-info-text org-title'>${t.originalTitle}</span></p>\n            <p class='text'>Genre <span class='back-info back-info-text movie-genre'>${t.genres.join(", ")}</span></p>\n            <p class='about-title'>About</p>\n            <p class='movie-description'>${t.about}</p>\n         </div>\n         </div>\n         <div class='modal-btns-wrapper'>\n         <button type="button" class="modal-btn current-btn watched">ADD TO WATCHED</button>\n    <button type="button" class="modal-btn queue">ADD TO QUEUE</button>\n    </div>`),function(){s.refs.backdrop.classList.remove("is-hidden"),window.addEventListener("keydown",h)}(),d=t,document.querySelector(".header__watched_button").classList.contains("active-header-button")){const e=document.querySelector(".watched");e.textContent="DELETE",e.addEventListener("click",(()=>{!function(e){const t=JSON.parse(localStorage.getItem("watched"));t.forEach(((n,a)=>{n.id===e.id&&(t.splice(a,1),localStorage.setItem("watched",JSON.stringify(t)),localStorage.getItem("watched")&&"[]"!==localStorage.getItem("watched")?i():s.refs.watchedFilmsList.innerHTML='\n    <div class="empty-page">\n    <img src="/empty.e9257588.jpg" alt="no films img" />\n    <span class="empty-page_text">There are no films here yet</span>\n  </div>\n    ',u())}))}(t)}));document.querySelector(".queue").addEventListener("click",f)}else{const e=document.querySelector(".queue");e.textContent="DELETE",e.addEventListener("click",(()=>{!function(e){const t=JSON.parse(localStorage.getItem("queue"));t.forEach(((n,a)=>{n.id===e.id&&(t.splice(a,1),localStorage.setItem("queue",JSON.stringify(t)),localStorage.getItem("queue")&&"[]"!==localStorage.getItem("queue")?r():s.refs.watchedFilmsList.innerHTML='\n    <div class="empty-page">\n    <img src="/empty.e9257588.jpg" alt="no films img" />\n    <span class="empty-page_text">There are no films here yet</span>\n  </div>\n    ',u())}))}(t)}));document.querySelector(".watched").addEventListener("click",g)}})),s.refs.modalCloseBtn.addEventListener("click",(function(){u()})),document.querySelector(".backdrop").addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&u()})),a("5YNLl")}();
//# sourceMappingURL=library.edb8ab57.js.map
