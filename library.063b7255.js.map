{"mappings":"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","sources":["src/library.js","src/js/library-buttons.js","src/js/watchedRender.js","src/js/markupFromStorage.js","src/js/library-modal.js"],"sourcesContent":["import './js/fetch';\nimport './js/library-buttons';\nimport './js/markupFromStorage';\nimport './js/watchedRender';\nimport './js/library-modal';\nimport './js/modal-footer';\nimport './js/theme-darck-light';\nimport './js/trailer';\n","import { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\n// const headerWatchedButton = document.querySelector('.header__watched_button');\n// const headerQueueButton = document.querySelector('.header__queue_button');\n\nrefs.headerWatchedButton.addEventListener('click', () => {\n  if (refs.headerWatchedButton.classList.contains('active-header-button')) {\n    return;\n  }\n\n  refs.headerWatchedButton.classList.add('active-header-button');\n  refs.headerQueueButton.classList.remove('active-header-button');\n  if (\n    localStorage.getItem('watched') &&\n    localStorage.getItem('watched') !== '[]'\n  ) {\n    renderWatchedFilms();\n  } else {\n    refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/Filmoteka-GOIT/empty.9c479684.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n  }\n  document.querySelector('.spinner').style.display = 'flex';\n  setTimeout(() => {\n    document.querySelector('.spinner').style.display = 'none';\n  }, 400);\n});\n\nrefs.headerQueueButton.addEventListener('click', () => {\n  if (refs.headerQueueButton.classList.contains('active-header-button')) {\n    return;\n  }\n\n  refs.headerQueueButton.classList.add('active-header-button');\n  refs.headerWatchedButton.classList.remove('active-header-button');\n  if (localStorage.getItem('queue') && localStorage.getItem('queue') !== '[]') {\n    renderQueueFilms();\n  } else {\n    refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/Filmoteka-GOIT/empty.9c479684.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n  }\n  document.querySelector('.spinner').style.display = 'flex';\n  setTimeout(() => {\n    document.querySelector('.spinner').style.display = 'none';\n  }, 700);\n});\n","import { refs } from './refs';\n\nexport { renderWatchedFilms, renderQueueFilms };\nfunction renderWatchedFilms() {\n  refs.watchedFilmsList.innerHTML = '';\n  const watchedFilms = JSON.parse(localStorage.getItem('watched'));\n\n  watchedFilms.forEach(movie => {\n    let name;\n\n    if (document.documentElement.scrollWidth >= 768) {\n      name =\n        movie.name.length >= 30\n          ? movie.name.substring(0, 30) + '...'\n          : movie.name;\n    } else name = movie.name;\n\n    if (movie.genres.length >= 3) {\n      refs.watchedFilmsList.insertAdjacentHTML(\n        'beforeend',\n        `<a class=\"watched-film__card\" href=\"\" data-id=\"${movie.id}\" >\n          <img \n            class=\"popular-film__cover\"\n            src=\"${movie.cover}\"\n            alt=\"${movie.name}\"\n            loading=\"lazy\"\n          />\n          <div class=\"info\">\n            <p class=\"info__name\">${name}</p>\n            <p class=\"info__other\">${movie.genres[0]}, ${movie.genres[1]}, Other | ${movie.year}</p>\n          </div>\n        </a>`\n      );\n      return;\n    }\n    refs.watchedFilmsList.insertAdjacentHTML(\n      'beforeend',\n      `<a class=\"watched-film__card\" href=\"\" data-id=\"${movie.id}\">\n      <img \n        class=\"popular-film__cover\"\n        src=\"${movie.cover}\"\n        alt=\"${movie.name}\"\n        loading=\"lazy\"\n      />\n      <div class=\"info\">\n        <p class=\"info__name\">${name}</p>\n        <p class=\"info__other\">${movie.genres.join(', ')} | ${movie.year}</p>\n      </div\n    </a>`\n    );\n  });\n}\n\nfunction renderQueueFilms() {\n  refs.watchedFilmsList.innerHTML = '';\n  const queueFilms = JSON.parse(localStorage.getItem('queue'));\n\n  queueFilms.forEach(movie => {\n    let name;\n\n    if (document.documentElement.scrollWidth >= 768) {\n      name =\n        movie.name.length >= 30\n          ? movie.name.substring(0, 30) + '...'\n          : movie.name;\n    } else name = movie.name;\n\n    if (movie.genres.length >= 3) {\n      refs.watchedFilmsList.insertAdjacentHTML(\n        'beforeend',\n        `<a class=\"watched-film__card\" href=\"\" data-id=\"${movie.id}\" >\n          <img \n            class=\"popular-film__cover\"\n            src=\"${movie.cover}\"\n            alt=\"${movie.name}\"\n            loading=\"lazy\"\n          />\n          <div class=\"info\">\n            <p class=\"info__name\">${name}</p>\n            <p class=\"info__other\">${movie.genres[0]}, ${movie.genres[1]}, Other | ${movie.year}</p>\n          </div>\n        </a>`\n      );\n      return;\n    }\n    refs.watchedFilmsList.insertAdjacentHTML(\n      'beforeend',\n      `<a class=\"watched-film__card\" href=\"\" data-id=\"${movie.id}\">\n      <img \n        class=\"popular-film__cover\"\n        src=\"${movie.cover}\"\n        alt=\"${movie.name}\"\n        loading=\"lazy\"\n      />\n      <div class=\"info\">\n        <p class=\"info__name\">${name}</p>\n        <p class=\"info__other\">${movie.genres.join(', ')} | ${movie.year}</p>\n      </div\n    </a>`\n    );\n  });\n}\n","import { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\n\nif (\n  localStorage.getItem('watched') &&\n  localStorage.getItem('watched') !== '[]'\n) {\n  renderWatchedFilms();\n}\ndocument.querySelector('.spinner').style.display = 'none';\n","import { fetchById } from './fetch';\nimport { refs } from './refs';\nimport { renderWatchedFilms, renderQueueFilms } from './watchedRender';\nimport {\n  addToStorage,\n  getFromStorage,\n  removeFromStorage,\n} from './localStorage';\n\nlet movieForStorage = {};\nlet filmsInWatched = [];\nlet filmsInQueue = [];\n\nrefs.watchedFilmsList.addEventListener('click', onMovieImageClick);\nrefs.modalCloseBtn.addEventListener('click', onCloseBtnClick);\n\nasync function onMovieImageClick(event) {\n  event.preventDefault();\n  if (!event.target.closest('.watched-film__card')) {\n    return;\n  }\n\n  const movie = await fetchById(\n    event.target.closest('.watched-film__card').dataset.id\n  );\n\n  refs.modalContainer.innerHTML = '';\n  refs.modalContainer.insertAdjacentHTML(\n    'beforeend',\n    `<div id=\"${movie.id}\" class=\"movie-card\">\n        <img src=\"${movie.cover}\" alt=\"${\n      movie.name\n    }\" loading=\"lazy\" class='movie-cover'>\n    \n        <div class=\"movie-info\">\n            <h2 class='movie-title'>${movie.name}</h2>\n            <p class='text'>Vote/Votes <span class='back-info movie-votes'><span class='movie-rating'>${movie.rating.toFixed(\n              2\n            )}</span>/ ${movie.votes}</span></p>\n             <p class='text'>Popularity <span class='back-info movie-popular'>${\n               movie.popularity\n             }</span></p>\n             <p class='text'>Original Title <span class='back-info back-info-text org-title'>${\n               movie.originalTitle\n             }</span></p>\n            <p class='text'>Genre <span class='back-info back-info-text movie-genre'>${movie.genres.join(\n              ', '\n            )}</span></p>\n            <p class='about-title'>About</p>\n            <p class='movie-description'>${movie.about}</p>\n         </div>\n         </div>\n         <div class='modal-btns-wrapper'>\n         <button type=\"button\" class=\"modal-btn current-btn watched\">ADD TO WATCHED</button>\n    <button type=\"button\" class=\"modal-btn queue\">ADD TO QUEUE</button>\n    </div>`\n  );\n\n  openModal();\n  movieForStorage = movie;\n  refs.youtubeBtn.dataset.id = movieForStorage.id;\n\n  if (\n    document\n      .querySelector('.header__watched_button')\n      .classList.contains('active-header-button')\n  ) {\n    const watchedDelete = document.querySelector('.watched');\n    watchedDelete.textContent = 'REMOVE WATCHED';\n    watchedDelete.addEventListener('click', () => {\n      deleteWatchedFilm(movie);\n    });\n    const addToQueue = document.querySelector('.queue');\n    addToQueue.addEventListener('click', onQueuedBtnClick);\n  } else {\n    const queueDelete = document.querySelector('.queue');\n    queueDelete.textContent = 'REMOVE QUEUE';\n    queueDelete.addEventListener('click', () => {\n      deleteQueueFilm(movie);\n    });\n    const addToWatched = document.querySelector('.watched');\n    addToWatched.addEventListener('click', onWatchedBtnClick);\n  }\n}\n\nfunction openModal() {\n  refs.backdrop.classList.remove('is-hidden');\n  refs.modal.classList.add('active');\n  window.addEventListener('keydown', onEscKeyPress);\n  document.body.classList.add('stop-scrolling');\n}\n\nfunction closeModal() {\n  refs.backdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onEscKeyPress);\n  document.body.classList.remove('stop-scrolling');\n}\nfunction onCloseBtnClick() {\n  closeModal();\n}\n\ndocument.querySelector('.backdrop').addEventListener('click', event => {\n  if (event.target.classList.contains('backdrop')) {\n    closeModal();\n  }\n});\n\nfunction deleteWatchedFilm(data) {\n  const films = JSON.parse(localStorage.getItem('watched'));\n\n  films.forEach((film, index) => {\n    if (film.id === data.id) {\n      films.splice(index, 1);\n      localStorage.setItem('watched', JSON.stringify(films));\n      if (\n        localStorage.getItem('watched') &&\n        localStorage.getItem('watched') !== '[]'\n      ) {\n        renderWatchedFilms();\n      } else {\n        refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/Filmoteka-GOIT/empty.9c479684.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n      }\n\n      closeModal();\n    }\n  });\n}\n\nfunction deleteQueueFilm(data) {\n  const films = JSON.parse(localStorage.getItem('queue'));\n\n  films.forEach((film, index) => {\n    if (film.id === data.id) {\n      films.splice(index, 1);\n      localStorage.setItem('queue', JSON.stringify(films));\n      if (\n        localStorage.getItem('queue') &&\n        localStorage.getItem('queue') !== '[]'\n      ) {\n        renderQueueFilms();\n      } else {\n        refs.watchedFilmsList.innerHTML = `\n    <div class=\"empty-page\">\n    <img src=\"/Filmoteka-GOIT/empty.9c479684.jpg\" alt=\"no films img\" />\n    <span class=\"empty-page_text\">There are no films here yet</span>\n  </div>\n    `;\n      }\n\n      closeModal();\n    }\n  });\n}\n\nfunction checkLibraryStorage() {\n  if (getFromStorage('watched')) {\n    filmsInWatched = getFromStorage('watched');\n  }\n\n  if (getFromStorage('queue')) {\n    filmsInQueue = getFromStorage('queue');\n  }\n}\n\nfunction onWatchedBtnClick(e) {\n  if (!movieForStorage.id) {\n    return alert('Movie not find');\n  }\n  checkLibraryStorage();\n\n  if (filmsInWatched.find(film => film.id === movieForStorage.id)) {\n    return;\n  }\n  filmsInWatched.push(movieForStorage);\n\n  addToStorage('watched', filmsInWatched);\n}\n\nfunction onQueuedBtnClick(e) {\n  if (!movieForStorage.id) {\n    return alert('Movie not find');\n  }\n  checkLibraryStorage();\n  if (filmsInQueue.find(film => film.id === movieForStorage.id)) {\n    return;\n  }\n  filmsInQueue.push(movieForStorage);\n\n  addToStorage('queue', filmsInQueue);\n}\n\nfunction onEscKeyPress(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n"],"names":["parcelRequire","$krGWQ","$36522d8004281571$export$5dfc23e2ecf7e5c1","refs","watchedFilmsList","innerHTML","JSON","parse","localStorage","getItem","forEach","movie","name","document","documentElement","scrollWidth","length","substring","genres","insertAdjacentHTML","id","cover","year","join","$36522d8004281571$export$a4665dd827595a4f","headerWatchedButton","addEventListener","classList","contains","add","headerQueueButton","remove","querySelector","style","display","setTimeout","$cyIMT","$da48e4bca1361a11$var$movieForStorage","$da48e4bca1361a11$var$filmsInWatched","$da48e4bca1361a11$var$filmsInQueue","$da48e4bca1361a11$var$closeModal","backdrop","window","removeEventListener","$da48e4bca1361a11$var$onEscKeyPress","body","$da48e4bca1361a11$var$checkLibraryStorage","$31u3U","getFromStorage","$da48e4bca1361a11$var$onWatchedBtnClick","e","alert","find","film","push","addToStorage","$da48e4bca1361a11$var$onQueuedBtnClick","event","key","async","preventDefault","target","closest","fetchById","dataset","modalContainer","rating","toFixed","votes","popularity","originalTitle","about","modal","$da48e4bca1361a11$var$openModal","youtubeBtn","watchedDelete","textContent","data","films","index","splice","setItem","stringify","$da48e4bca1361a11$var$deleteWatchedFilm","queueDelete","$da48e4bca1361a11$var$deleteQueueFilm","modalCloseBtn"],"version":3,"file":"library.063b7255.js.map"}